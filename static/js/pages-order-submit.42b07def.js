(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-submit"],{"0ee1":function(e,t,a){e.exports=a.p+"static/images/balance-pay.png"},"21b1":function(e,t,a){"use strict";a.r(t);var i=a("aab5"),n=a("ffdd");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("d594");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"b4a63e74",null,!1,i["a"],void 0);t["default"]=s.exports},2944:function(e,t,a){var i=a("2e59");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("967d").default;n("2c4eba42",i,!0,{sourceMap:!1,shadowMode:!1})},"2e59":function(e,t,a){var i=a("c86c");t=i(!1),t.push([e.i,".coupon-container[data-v-b4a63e74]{display:flex;padding:8px}.coupon-wrap[data-v-b4a63e74]{display:flex;flex:1;flex-direction:column}.coupon-item[data-v-b4a63e74]{display:flex;background-color:#fffcfc;border-radius:4px;margin-bottom:10px;\n    /* padding: 20px 10px; */position:relative;flex-direction:column;padding-right:10px}.coupon-item-top[data-v-b4a63e74]{display:flex}.coupon-item-bottom[data-v-b4a63e74]{display:flex;padding:10px;font-size:12px;color:#333;background-color:#fefcfc}.coupon-price[data-v-b4a63e74]{display:flex;justify-content:center;align-items:center;width:140px;height:90px;background-color:#ffeeed;flex-direction:column}.coupon-price-a[data-v-b4a63e74]{color:#dd2e26}.coupon-price-b[data-v-b4a63e74]{color:#dd2e26}.coupon-price-c[data-v-b4a63e74]{color:#dd2e26}.coupon-price-item[data-v-b4a63e74]{display:flex;vertical-align:bottom;display:table-cell}.coupon-price-icon[data-v-b4a63e74]{font-size:16px;font-weight:bolder}.coupon-price-value[data-v-b4a63e74]{font-size:30px;font-weight:bolder}.coupon-price-limit[data-v-b4a63e74]{font-size:12px}.coupon-info[data-v-b4a63e74]{display:flex;flex:1;justify-content:center;align-items:center;flex-direction:column}.coupon-cate[data-v-b4a63e74]{color:#dd2e26;font-size:12px}.coupon-title[data-v-b4a63e74]{font-size:15px;color:#222;line-height:30px}.coupon-valid-time[data-v-b4a63e74]{font-size:12px;color:#666}.coupon-status[data-v-b4a63e74]{display:flex;width:80px;justify-content:flex-end;align-items:center}.coupon-btn[data-v-b4a63e74]{padding:5px 12px;border-radius:100px;font-size:12px}.coupon-btn-wait-a[data-v-b4a63e74]{background-color:#dd2e26;color:#fff}.coupon-btn-wait-b[data-v-b4a63e74]{background-color:#dd2e26;color:#fff}.coupon-btn-wait-c[data-v-b4a63e74]{background-color:#dd2e26;color:#fff}.coupon-btn-default[data-v-b4a63e74]{background-color:#999;color:#fff}",""]),e.exports=t},"44dc":function(e,t,a){"use strict";a.r(t);var i=a("6e36"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},"629c":function(e,t,a){"use strict";a.r(t);var i=a("c913"),n=a("44dc");for(var o in n)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("96de");var r=a("828b"),s=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"5e9e13ad",null,!1,i["a"],void 0);t["default"]=s.exports},"6e36":function(e,t,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("bf0f"),a("2797"),a("aa9c"),a("e838");var n=i(a("2634")),o=i(a("2fdc")),r=a("3742"),s=a("a1db"),c={data:function(){return{e:{},address:{},orderProduct:[],orderProductIds:[],master:{},timeArray:["0-1点","1-2点","2-3点","3-4点","4-5点","5-6点","6-7点","7-8点","8-9点","9-10点","10-11点","11-12点","12-13点","13-14点","14-15点","15-16点","16-17点","17-18点","18-19点","19-20点","20-21点","21-22点","22-23点","23-24点"],timeIndex:-1,btnStatus:!0,payType:1,user:{balance:""},coupon_list:[],coupon:{id:0,coupon_record_id:0},payInfo:{pay_fee:0,travel_expense:0,bus_fee:0,taxi_fee:0,qibujia:0},travel_type:1,distance_msg:"",distance:0,rtData:{},canSubmit:!0,remark:"",item_detail:{},travel_fee_text:""}},onLoad:function(e){this.e=e,this.itemDetail(),this.masterDetail(),this.userInfo()},onShow:function(){uni.getStorageSync("selAddress")&&(this.address=uni.getStorageSync("selAddress"),this.calcDistanceAndFee()),this.travel_fee_text=uni.getStorageSync("settingInfo").travel_fee_text,this.addressList(),this.couponRecord()},onReady:function(){},methods:{itemDetail:function(){var e=this;return(0,o.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.itemDetail)({id:e.e.item_id});case 2:a=t.sent,e.item_detail=a.data.data,e.orderProduct=[a.data.data],e.orderProduct.forEach((function(t){e.orderProductIds.push(t.id)})),e.calcPayInfo();case 7:case"end":return t.stop()}}),t)})))()},masterDetail:function(){var e=this;return(0,o.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.masterDetail)({id:e.e.master_id});case 2:a=t.sent,e.master=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},inputRemark:function(e){this.remark=e.detail.value},addressList:function(){var e=this;return(0,o.default)((0,n.default)().mark((function t(){var a,i,o;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.addressList)();case 2:if(a=t.sent,0==a.data.data.length)e.address={},uni.removeStorageSync("selAddress");else{for(i=!1,o=0;o<a.data.data.length;o++)a.data.data[o].id==e.address.id&&(i=!0);i||(e.address={},uni.removeStorageSync("selAddress"))}e.calcDistanceAndFee();case 5:case"end":return t.stop()}}),t)})))()},calcDistanceAndFee:function(){if(this.address.id){var e=this.distanceOf({latitude:this.master.latitude,longitude:this.master.longitude},{latitude:this.address.latitude,longitude:this.address.longitude});this.distance=(e/1e3).toFixed(2),console.log("距离：",e),this.distance_msg=e<1e3?e+"米":(e/1e3).toFixed(2)+"公里"}this.calcPayInfo()},changeTravelType:function(e){this.travel_type=e,this.calcPayInfo()},calcPayInfo:function(){var e,t,a=this;if(e=t=0,this.payInfo.pay_fee=0,this.orderProduct.forEach((function(e){console.log(e),a.payInfo.pay_fee+=parseFloat(e.price)})),this.coupon.amount&&(this.payInfo.pay_fee-=parseFloat(this.coupon.amount)),1==this.master.travel_expense&&this.address.id&&(console.log("计算时距离：",this.distance),1==this.travel_type)){var i=(this.distance-1).toFixed(2);e=t=parseFloat(this.master.qibujia),i>0&&(e=t+=parseFloat((this.master.taxi_fee*i).toFixed(2)))}this.payInfo.travel_expense=e.toFixed(2),this.payInfo.taxi_fee=t,this.payInfo.bus_fee=0,this.payInfo.pay_fee=parseFloat((this.payInfo.pay_fee+parseFloat(e)).toFixed(2))},selCoupon:function(e){console.log(e),this.coupon=e,this.$refs.popup.close(),this.calcPayInfo()},closeCouponToast:function(){this.$refs.popup.close()},openCouponToast:function(){this.$refs.popup.open("bottom")},removeDisable:function(){var e=this;setTimeout((function(){e.canSubmit=!0}),1500)},couponRecord:function(){var e=this;return(0,o.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.couponRecord)({ids:e.orderProductIds.join("&"),use_range:"submit_order"});case 2:a=t.sent,e.coupon_list=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},userInfo:function(){var e=this;return(0,o.default)((0,n.default)().mark((function t(){var a;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,r.getUserInfo)();case 2:a=t.sent,e.user=a.data.data,e.user.balance=parseFloat(a.data.data.balance);case 5:case"end":return t.stop()}}),t)})))()},pay:function(){var e=this;return(0,o.default)((0,n.default)().mark((function t(){var a,i;return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1!=e.timeIndex){t.next=3;break}return uni.showToast({title:"请选择服务时间",icon:"none"}),t.abrupt("return");case 3:if(console.log(parseFloat(e.payInfo.pay_fee),parseFloat(e.user.balance)),!(parseFloat(e.payInfo.pay_fee)>parseFloat(e.user.balance)&&2==e.payType)){t.next=7;break}return uni.showToast({title:"余额不足，请选择微信支付",icon:"none"}),t.abrupt("return");case 7:if(a={},a.address_id=e.address.id,a.master_id=e.master.id,a.service_time=e.timeArray[e.timeIndex],e.btnStatus=!1,a.ids=e.orderProduct[0].id+"=1",a.coupon_id=e.coupon.coupon_record_id,a.pay_type=e.payType,a.travel_type=e.travel_type,a.travel_expense=e.payInfo.travel_expense,a.remark=e.remark,e.canSubmit){t.next=20;break}return t.abrupt("return");case 20:return e.canSubmit=!1,e.removeDisable(),uni.showLoading(),t.next=25,(0,r.createOrder)(a);case 25:if(i=t.sent,uni.hideLoading(),2==e.payType&&uni.showModal({title:"支付成功",confirmText:"确定",showCancel:!1,success:function(){uni.switchTab({url:"/pages/order/list"})}}),1!=e.payType){t.next=34;break}return e.btnStatus=!0,e.canSubmit=!0,s.toPay(i.data.data,{cate:"order"}),t.abrupt("return");case 34:case"end":return t.stop()}}),t)})))()},bindTimeChange:function(e){this.timeIndex=e.detail.value},selAddress:function(){uni.setStorageSync("isSelAddress",1),uni.navigateTo({url:"/pages/address/list"})},payTypeChange:function(e){console.log(e),this.payType=e.detail.value},rad:function(e){return e*Math.PI/180},distanceOf:function(e,t){console.log(e,t);var a=this.rad(e.latitude),i=this.rad(t.latitude),n=a-i,o=this.rad(e.longitude)-this.rad(t.longitude),r=2*Math.asin(Math.sqrt(Math.pow(Math.sin(o/2),2)+Math.cos(a)*Math.cos(i)*Math.pow(Math.sin(n/2),2)));return r*=6378.137,r=Math.abs(Math.round(1e4*r)/10),r}}};t.default=c},"7fe6":function(e,t,a){e.exports=a.p+"static/images/coupon.png"},"96de":function(e,t,a){"use strict";var i=a("98e5"),n=a.n(i);n.a},"98e5":function(e,t,a){var i=a("a192");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("967d").default;n("6b22f4ea",i,!0,{sourceMap:!1,shadowMode:!1})},a192:function(e,t,a){var i=a("c86c");t=i(!1),t.push([e.i,".address-container[data-v-5e9e13ad]{padding:10px;background-color:#fff}.address-add[data-v-5e9e13ad]{background-color:var(--mainColor);color:#fff;border-radius:8px;height:36px;line-height:36px;text-align:center}.address-wrap[data-v-5e9e13ad]{display:flex;flex:1}.address-item[data-v-5e9e13ad]{display:flex;flex:1}.address-info[data-v-5e9e13ad]{display:flex;flex:1;flex-direction:column;font-size:14px}.address-info-top[data-v-5e9e13ad]{display:flex}.address-info-name[data-v-5e9e13ad]{display:flex;flex:1}.address-info-tel[data-v-5e9e13ad]{display:flex;flex:1;justify-content:flex-end}.address-info-addr[data-v-5e9e13ad]{display:flex;flex:1}.address-icon[data-v-5e9e13ad]{display:flex;width:40px;justify-content:flex-end;align-items:center}.order-container[data-v-5e9e13ad]{padding:10px}.order-wrap[data-v-5e9e13ad]{background-color:#fff;padding:6px}.order-product[data-v-5e9e13ad]{padding:10px 0}.order-product-item[data-v-5e9e13ad]{display:flex}.order-product-pic[data-v-5e9e13ad]{display:flex;width:90px}.order-product-pic uni-image[data-v-5e9e13ad]{width:90px;height:70px}.order-product-info[data-v-5e9e13ad]{display:flex;flex-direction:column;flex:1;justify-content:center;padding-left:10px}.order-product-name[data-v-5e9e13ad]{font-size:16px;color:#333;font-weight:700;margin-bottom:8px}.order-product-price[data-v-5e9e13ad]{color:#ff6051;font-size:16px;font-weight:700;line-height:20px}.order-product-num[data-v-5e9e13ad]{display:flex;align-items:center;justify-content:center;padding-right:10px}.order-param[data-v-5e9e13ad]{display:flex;height:40px;align-items:center;padding-left:5px}.order-param-pic[data-v-5e9e13ad]{display:flex;width:26px}.order-param-pic uni-image[data-v-5e9e13ad]{width:20px;height:20px}.order-param-label[data-v-5e9e13ad]{display:flex;width:80px;font-size:13px;color:#333}.order-param-value[data-v-5e9e13ad]{display:flex;flex:1;justify-content:flex-end}.order-param-value uni-input[data-v-5e9e13ad]{width:100%;text-align:right}.order-param-icon[data-v-5e9e13ad]{display:flex;width:20px;justify-content:flex-end}.order-param-coupon[data-v-5e9e13ad]{display:flex;justify-content:flex-end;color:#999}.order-param-coupon-active[data-v-5e9e13ad]{color:#fff;background-color:#fd4950;padding:2px 3px 2px 10px;border-radius:100px;font-size:12px}.order-param-coupon-sel[data-v-5e9e13ad]{color:#fd4950}.master-name[data-v-5e9e13ad]{font-weight:600;padding-right:5px}.service-time[data-v-5e9e13ad]{color:var(--mainColor)}.travel-item[data-v-5e9e13ad]{width:80px;height:28px;line-height:28px;text-align:center;margin-left:10px;border:1px solid #333;border-radius:3px}.travel-item-selected[data-v-5e9e13ad]{background-color:var(--mainColor);color:#fff;border:1px solid var(--mainColor)}.pay-wrap[data-v-5e9e13ad]{position:fixed;left:0;right:0;bottom:0;background-color:#fff;display:flex;align-items:center;padding:10px}.pay-info[data-v-5e9e13ad]{display:flex;flex:1;color:#ff6051;font-size:19px;align-items:center}.pay-info uni-text[data-v-5e9e13ad]{font-size:13px}.pay-btn[data-v-5e9e13ad]{width:100px;background-color:var(--mainColor);color:#fff;border-radius:100px;padding:6px 0;text-align:center}.pay-type-container[data-v-5e9e13ad]{padding:10px}.pay-type-header[data-v-5e9e13ad]{line-height:30px}.pay-type-wrap[data-v-5e9e13ad]{background-color:#fff;padding:10px}.pay-type-item[data-v-5e9e13ad]{display:flex;height:40px;align-items:center}.pay-type-icon[data-v-5e9e13ad]{display:flex;width:30px}.pay-type-icon uni-image[data-v-5e9e13ad]{width:25px;height:25px}.pay-type-name[data-v-5e9e13ad]{display:flex;flex:1;align-items:center}.pay-type-radio[data-v-5e9e13ad]{display:flex;width:50px;justify-content:center}.pay-type-radio uni-radio[data-v-5e9e13ad]{-webkit-transform:scale(.7);transform:scale(.7)}",""]),e.exports=t},a1db:function(e,t,a){"use strict";a("d4b5");var i,n,o,r,s=a("3742");function c(){setTimeout((function(){"order"==r.cate&&((0,s.updateOrder)({cate:1,id:o.id}),uni.switchTab({url:"/pages/order/list"})),"jiazhong"==r.cate&&((0,s.updateOrder)({cate:3,id:o.id}),uni.redirectTo({url:"/pages/order/detail?id="+o.id})),"recharge"==r.cate&&((0,s.updateOrder)({cate:2,id:o.id}),uni.navigateTo({url:"/pages/balance/record"}))}),1500)}(function(){n=uni.getStorageSync("agent_cate"),"gzh"==n&&(i=a("c722"))})(),e.exports={toPay:function(e,t){o=e,r=t,console.log("----aa-a-"+n),"gzh"==n?function(){console.log("-----jweixin---"),console.log(i),i.config({debug:!1,appId:o.appId,timestamp:o.timeStamp,nonceStr:o.nonceStr,signature:o.paySign,jsApiList:["chooseWXPay"]}),i.ready((function(){i.checkJsApi({jsApiList:["chooseWXPay"],success:function(e){console.log("checkjsapi Success"),console.log(e)},fail:function(e){console.log("res"),console.log(e)}}),i.chooseWXPay({timestamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,success:function(e){console.log("paysuccess"),console.log(e),c()},cancel:function(e){},fail:function(e){console.log("payfail"),console.log(e),uni.showModal({title:"支付失败",showCancel:!1,success:function(){}})}})})),i.error((function(e){console.log("error"),console.log(e),uni.showToast({icon:"none",title:"支付失败",duration:4e3})}))}():"micro"==n&&function(){uni.requestPayment({provider:"wxpay",timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,success:function(e){uni.showToast({title:"支付成功"}),c()},fail:function(e){console.log("fail:"+JSON.stringify(e)),uni.showModal({title:"支付失败",confirmText:"确定",showCancel:!1})},complete:function(){}})}()}}},a3dc:function(e,t,a){"use strict";a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"yj-coupon",emits:["selCoupon"],props:{list:{type:Array,default:[]},btnShow:{type:Boolean,default:!1}},data:function(){return{}},onLoad:function(){},methods:{useCoupon:function(e){this.$emit("selCoupon",e)}}};t.default=i},aab5:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[e.list[0]?e._e():i("v-uni-view",{staticStyle:{"text-align":"center","padding-top":"100px"}},[i("v-uni-image",{staticStyle:{width:"200px",height:"200px"},attrs:{src:a("db72")}})],1),i("v-uni-view",{staticClass:"coupon-container"},[i("v-uni-view",{staticClass:"coupon-wrap"},e._l(e.list,(function(t){return i("v-uni-view",{staticClass:"coupon-item mix-border"},[i("v-uni-view",{staticClass:"coupon-item-top mix-bottom"},[i("v-uni-view",{staticClass:"coupon-price"},[i("v-uni-view",{staticClass:"coupon-price-item coupon-price-a"},[i("v-uni-text",{staticClass:"coupon-price-icon"},[e._v("￥")]),i("v-uni-text",{staticClass:"coupon-price-value"},[e._v(e._s(t.amount))])],1),1==t.type?i("v-uni-view",{staticClass:"coupon-price-limit"},[e._v("直减")]):e._e(),2==t.type?i("v-uni-view",{staticClass:"coupon-price-limit"},[e._v("满"+e._s(t.minimum)+"减"+e._s(t.amount))]):e._e()],1),i("v-uni-view",{staticClass:"coupon-info"},[i("v-uni-view",{staticClass:"coupon-title"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"coupon-valid-time"},[1==t.use_range?i("v-uni-text",{staticClass:"coupon-cate"},[e._v("#通用券")]):e._e()],1),[i("v-uni-view",{staticClass:"coupon-valid-time"},[e._v(e._s(t.valid_start_time)+" - "+e._s(t.valid_end_time))])]],2),e.btnShow?i("v-uni-view",{staticClass:"coupon-status"},[i("v-uni-view",{staticClass:"coupon-btn coupon-btn-wait-a",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.useCoupon(t)}}},[e._v("使用")])],1):e._e()],1)],1)})),1)],1)],1)},n=[]},c722:function(e,t,a){var i,n=a("4550").default;a("5c47"),a("2c10"),a("5ef2"),a("aa9c"),a("a1c1"),a("d4b5"),function(o,r){i=function(){return function(e,t){if(!e.jWeixin){var a,i,o={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest",openEnterpriseRedPacket:"getRecevieBizHongBaoRequest",startSearchBeacons:"startMonitoringBeacons",stopSearchBeacons:"stopMonitoringBeacons",onSearchBeacons:"onBeaconsInRange",consumeAndShareCard:"consumedShareCard",openAddress:"editAddress"},r=function(){var e={};for(var t in o)e[o[t]]=t;return e}(),s=e.document,c=s.title,d=navigator.userAgent.toLowerCase(),u=navigator.platform.toLowerCase(),l=!(!u.match("mac")&&!u.match("win")),p=-1!=d.indexOf("wxdebugger"),f=-1!=d.indexOf("micromessenger"),v=-1!=d.indexOf("android"),m=-1!=d.indexOf("iphone")||-1!=d.indexOf("ipad"),g=(i=d.match(/micromessenger\/(\d+\.\d+\.\d+)/)||d.match(/micromessenger\/(\d+\.\d+)/))?i[1]:"",h={initStartTime:E(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},y={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:m?1:v?2:-1,clientVersion:g,url:encodeURIComponent(location.href)},x={},w={_completes:[]},_={state:0,data:{}};j((function(){h.initEndTime=E()}));var b=!1,S=[],C=(a={config:function(t){L("config",x=t);var a=!1!==x.check;j((function(){if(a)T(o.config,{verifyJsApiList:V(x.jsApiList),verifyOpenTagList:V(x.openTagList)},function(){w._complete=function(e){h.preVerifyEndTime=E(),_.state=1,_.data=e},w.success=function(e){y.isPreVerifyOk=0},w.fail=function(e){w._fail?w._fail(e):_.state=-1};var e=w._completes;return e.push((function(){!function(){if(!(l||p||x.debug||g<"6.0.2"||y.systemType<0)){var e=new Image;y.appId=x.appId,y.initTime=h.initEndTime-h.initStartTime,y.preVerifyTime=h.preVerifyEndTime-h.preVerifyStartTime,C.getNetworkType({isInnerInvoke:!0,success:function(t){y.networkType=t.networkType;var a="https://open.weixin.qq.com/sdk/report?v="+y.version+"&o="+y.isPreVerifyOk+"&s="+y.systemType+"&c="+y.clientVersion+"&a="+y.appId+"&n="+y.networkType+"&i="+y.initTime+"&p="+y.preVerifyTime+"&u="+y.url;e.src=a}})}}()})),w.complete=function(t){for(var a=0,i=e.length;a<i;++a)e[a]();w._completes=[]},w}()),h.preVerifyStartTime=E();else{_.state=1;for(var e=w._completes,t=0,i=e.length;t<i;++t)e[t]();w._completes=[]}})),C.invoke||(C.invoke=function(t,a,i){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,P(a),i)},C.on=function(t,a){e.WeixinJSBridge&&WeixinJSBridge.on(t,a)})},ready:function(e){0!=_.state?e():(w._completes.push(e),!f&&x.debug&&e())},error:function(e){g<"6.0.2"||(-1==_.state?e(_.data):w._fail=e)},checkJsApi:function(e){T("checkJsApi",{jsApiList:V(e.jsApiList)},(e._complete=function(e){if(v){var t=e.checkResult;t&&(e.checkResult=JSON.parse(t))}e=function(e){var t=e.checkResult;for(var a in t){var i=r[a];i&&(t[i]=t[a],delete t[a])}return e}(e)},e))},onMenuShareTimeline:function(e){M(o.onMenuShareTimeline,{complete:function(){T("shareTimeline",{title:e.title||c,desc:e.title||c,img_url:e.imgUrl||"",link:e.link||location.href,type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareAppMessage:function(e){M(o.onMenuShareAppMessage,{complete:function(t){"favorite"===t.scene?T("sendAppMessage",{title:e.title||c,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""}):T("sendAppMessage",{title:e.title||c,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){M(o.onMenuShareQQ,{complete:function(){T("shareQQ",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){M(o.onMenuShareWeibo,{complete:function(){T("shareWeiboApp",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){M(o.onMenuShareQZone,{complete:function(){T("shareQZone",{title:e.title||c,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},updateTimelineShareData:function(e){T("updateTimelineShareData",{title:e.title,link:e.link,imgUrl:e.imgUrl},e)},updateAppMessageShareData:function(e){T("updateAppMessageShareData",{title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl},e)},startRecord:function(e){T("startRecord",{},e)},stopRecord:function(e){T("stopRecord",{},e)},onVoiceRecordEnd:function(e){M("onVoiceRecordEnd",e)},playVoice:function(e){T("playVoice",{localId:e.localId},e)},pauseVoice:function(e){T("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){T("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){M("onVoicePlayEnd",e)},uploadVoice:function(e){T("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){T("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){T("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){T("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},(e._complete=function(e){if(v){var t=e.localIds;try{t&&(e.localIds=JSON.parse(t))}catch(e){}}},e))},getLocation:function(e){},previewImage:function(e){T(o.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){T("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){T("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getLocalImgData:function(e){!1===b?(b=!0,T("getLocalImgData",{localId:e.localId},(e._complete=function(e){if(b=!1,0<S.length){var t=S.shift();wx.getLocalImgData(t)}},e))):S.push(e)},getNetworkType:function(e){T("getNetworkType",{},(e._complete=function(e){e=function(e){var t=e.errMsg;e.errMsg="getNetworkType:ok";var a=e.subtype;if(delete e.subtype,a)e.networkType=a;else{var i=t.indexOf(":"),n=t.substring(i+1);switch(n){case"wifi":case"edge":case"wwan":e.networkType=n;break;default:e.errMsg="getNetworkType:fail"}}return e}(e)},e))},openLocation:function(e){T("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)}},n(a,"getLocation",(function(e){T(o.getLocation,{type:(e=e||{}).type||"wgs84"},(e._complete=function(e){delete e.type},e))})),n(a,"hideOptionMenu",(function(e){T("hideOptionMenu",{},e)})),n(a,"showOptionMenu",(function(e){T("showOptionMenu",{},e)})),n(a,"closeWindow",(function(e){T("closeWindow",{},e=e||{})})),n(a,"hideMenuItems",(function(e){T("hideMenuItems",{menuList:e.menuList},e)})),n(a,"showMenuItems",(function(e){T("showMenuItems",{menuList:e.menuList},e)})),n(a,"hideAllNonBaseMenuItem",(function(e){T("hideAllNonBaseMenuItem",{},e)})),n(a,"showAllNonBaseMenuItem",(function(e){T("showAllNonBaseMenuItem",{},e)})),n(a,"scanQRCode",(function(e){T("scanQRCode",{needResult:(e=e||{}).needResult||0,scanType:e.scanType||["qrCode","barCode"]},(e._complete=function(e){if(m){var t=e.resultStr;if(t){var a=JSON.parse(t);e.resultStr=a&&a.scan_code&&a.scan_code.scan_result}}},e))})),n(a,"openAddress",(function(e){T(o.openAddress,{},(e._complete=function(e){e=function(e){return e.postalCode=e.addressPostalCode,delete e.addressPostalCode,e.provinceName=e.proviceFirstStageName,delete e.proviceFirstStageName,e.cityName=e.addressCitySecondStageName,delete e.addressCitySecondStageName,e.countryName=e.addressCountiesThirdStageName,delete e.addressCountiesThirdStageName,e.detailInfo=e.addressDetailInfo,delete e.addressDetailInfo,e}(e)},e))})),n(a,"openProductSpecificView",(function(e){T(o.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0,ext_info:e.extInfo},e)})),n(a,"addCard",(function(e){for(var t=e.cardList,a=[],i=0,n=t.length;i<n;++i){var r=t[i],s={card_id:r.cardId,card_ext:r.cardExt};a.push(s)}T(o.addCard,{card_list:a},(e._complete=function(e){var t=e.card_list;if(t){for(var a=0,i=(t=JSON.parse(t)).length;a<i;++a){var n=t[a];n.cardId=n.card_id,n.cardExt=n.card_ext,n.isSuccess=!!n.is_succ,delete n.card_id,delete n.card_ext,delete n.is_succ}e.cardList=t,delete e.card_list}},e))})),n(a,"chooseCard",(function(e){T("chooseCard",{app_id:x.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},(e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e))})),n(a,"openCard",(function(e){for(var t=e.cardList,a=[],i=0,n=t.length;i<n;++i){var r=t[i],s={card_id:r.cardId,code:r.code};a.push(s)}T(o.openCard,{card_list:a},e)})),n(a,"consumeAndShareCard",(function(e){T(o.consumeAndShareCard,{consumedCardId:e.cardId,consumedCode:e.code},e)})),n(a,"chooseWXPay",(function(e){T(o.chooseWXPay,A(e),e)})),n(a,"openEnterpriseRedPacket",(function(e){T(o.openEnterpriseRedPacket,A(e),e)})),n(a,"startSearchBeacons",(function(e){T(o.startSearchBeacons,{ticket:e.ticket},e)})),n(a,"stopSearchBeacons",(function(e){T(o.stopSearchBeacons,{},e)})),n(a,"onSearchBeacons",(function(e){M(o.onSearchBeacons,e)})),n(a,"openEnterpriseChat",(function(e){T("openEnterpriseChat",{useridlist:e.userIds,chatname:e.groupName},e)})),n(a,"launchMiniProgram",(function(e){T("launchMiniProgram",{targetAppId:e.targetAppId,path:function(e){if("string"==typeof e&&0<e.length){var t=e.split("?")[0],a=e.split("?")[1];return t+=".html",void 0!==a?t+"?"+a:t}}(e.path),envVersion:e.envVersion},e)})),n(a,"openBusinessView",(function(e){T("openBusinessView",{businessType:e.businessType,queryString:e.queryString||"",envVersion:e.envVersion},(e._complete=function(e){if(v){var t=e.extraData;if(t)try{e.extraData=JSON.parse(t)}catch(t){e.extraData={}}}},e))})),n(a,"miniProgram",{navigateBack:function(e){e=e||{},j((function(){T("invokeMiniProgramAPI",{name:"navigateBack",arg:{delta:e.delta||1}},e)}))},navigateTo:function(e){j((function(){T("invokeMiniProgramAPI",{name:"navigateTo",arg:{url:e.url}},e)}))},redirectTo:function(e){j((function(){T("invokeMiniProgramAPI",{name:"redirectTo",arg:{url:e.url}},e)}))},switchTab:function(e){j((function(){T("invokeMiniProgramAPI",{name:"switchTab",arg:{url:e.url}},e)}))},reLaunch:function(e){j((function(){T("invokeMiniProgramAPI",{name:"reLaunch",arg:{url:e.url}},e)}))},postMessage:function(e){j((function(){T("invokeMiniProgramAPI",{name:"postMessage",arg:e.data||{}},e)}))},getEnv:function(t){j((function(){t({miniprogram:"miniprogram"===e.__wxjs_environment})}))}}),a),I=1,k={};return s.addEventListener("error",(function(e){if(!v){var t=e.target,a=t.tagName,i=t.src;if(("IMG"==a||"VIDEO"==a||"AUDIO"==a||"SOURCE"==a)&&-1!=i.indexOf("wxlocalresource://")){e.preventDefault(),e.stopPropagation();var n=t["wx-id"];if(n||(n=I++,t["wx-id"]=n),k[n])return;k[n]=!0,wx.ready((function(){wx.getLocalImgData({localId:i,success:function(e){t.src=e.localData}})}))}}}),!0),s.addEventListener("load",(function(e){if(!v){var t=e.target,a=t.tagName;if(t.src,"IMG"==a||"VIDEO"==a||"AUDIO"==a||"SOURCE"==a){var i=t["wx-id"];i&&(k[i]=!1)}}}),!0),t&&(e.wx=e.jWeixin=C),C}function T(t,a,i){e.WeixinJSBridge?WeixinJSBridge.invoke(t,P(a),(function(e){O(t,e,i)})):L(t,i)}function M(t,a,i){e.WeixinJSBridge?WeixinJSBridge.on(t,(function(e){i&&i.trigger&&i.trigger(e),O(t,e,a)})):L(t,i||a)}function P(e){return(e=e||{}).appId=x.appId,e.verifyAppId=x.appId,e.verifySignType="sha1",e.verifyTimestamp=x.timestamp+"",e.verifyNonceStr=x.nonceStr,e.verifySignature=x.signature,e}function A(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function O(e,t,a){"openEnterpriseChat"!=e&&"openBusinessView"!==e||(t.errCode=t.err_code),delete t.err_code,delete t.err_desc,delete t.err_detail;var i=t.errMsg;i||(i=t.err_msg,delete t.err_msg,i=function(e,t){var a=e,i=r[a];i&&(a=i);var n="ok";if(t){var o=t.indexOf(":");"confirm"==(n=t.substring(o+1))&&(n="ok"),"failed"==n&&(n="fail"),-1!=n.indexOf("failed_")&&(n=n.substring(7)),-1!=n.indexOf("fail_")&&(n=n.substring(5)),"access denied"!=(n=(n=n.replace(/_/g," ")).toLowerCase())&&"no permission to execute"!=n||(n="permission denied"),"config"==a&&"function not exist"==n&&(n="ok"),""==n&&(n="fail")}return a+":"+n}(e,i),t.errMsg=i),(a=a||{})._complete&&(a._complete(t),delete a._complete),i=t.errMsg||"",x.debug&&!a.isInnerInvoke&&alert(JSON.stringify(t));var n=i.indexOf(":");switch(i.substring(n+1)){case"ok":a.success&&a.success(t);break;case"cancel":a.cancel&&a.cancel(t);break;default:a.fail&&a.fail(t)}a.complete&&a.complete(t)}function V(e){if(e){for(var t=0,a=e.length;t<a;++t){var i=e[t],n=o[i];n&&(e[t]=n)}return e}}function L(e,t){if(!(!x.debug||t&&t.isInnerInvoke)){var a=r[e];a&&(e=a),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function E(){return(new Date).getTime()}function j(t){f&&(e.WeixinJSBridge?t():s.addEventListener&&s.addEventListener("WeixinJSBridgeReady",t,!1))}}(o)}.call(t,a,t,e),void 0===i||(e.exports=i)}(window)},c913:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var i={uniIcons:a("a6ce").default,uniPopup:a("4beb").default,yjCoupon:a("21b1").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"address-container",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selAddress.apply(void 0,arguments)}}},[e.address.id?i("v-uni-view",{staticClass:"address-wrap"},[i("v-uni-view",{staticClass:"address-item"},[i("v-uni-view",{staticClass:"address-info"},[i("v-uni-view",{staticClass:"address-info-top"},[i("v-uni-view",{staticClass:"address-info-name"},[e._v("联系人："+e._s(e.address.name))]),i("v-uni-view",{staticClass:"address-info-tel"},[e._v(e._s(e.address.tel))])],1),i("v-uni-view",{staticClass:"address-info-addr"},[e._v("地址："+e._s(e.address.address))])],1),i("v-uni-view",{staticClass:"address-icon"},[i("uni-icons",{attrs:{type:"forward"}})],1)],1)],1):i("v-uni-view",{staticClass:"address-add"},[e._v("添加/选择地址")])],1),i("v-uni-view",{staticClass:"order-container"},[i("v-uni-view",{staticClass:"order-wrap"},[i("v-uni-view",{staticClass:"order-product"},e._l(e.orderProduct,(function(t,a){return i("v-uni-view",{staticClass:"order-product-item"},[i("v-uni-view",{staticClass:"order-product-pic"},[i("v-uni-image",{attrs:{src:t.pic}})],1),i("v-uni-view",{staticClass:"order-product-info"},[i("v-uni-view",{staticClass:"order-product-name"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"order-product-price"},[e._v(e._s(t.price))])],1),i("v-uni-view",{staticClass:"order-product-num"},[e._v("x1")])],1)})),1),i("v-uni-view",{staticClass:"order-param mix-top"},[i("v-uni-view",{staticClass:"order-param-label"},[e._v("服务技师")]),i("v-uni-view",{staticClass:"order-param-value master-name"},[e._v(e._s(e.master.name))])],1),i("v-uni-picker",{attrs:{value:e.timeIndex,range:e.timeArray},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindTimeChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"order-param"},[i("v-uni-view",{staticClass:"order-param-label"},[e._v("服务时间")]),i("v-uni-view",{staticClass:"order-param-value service-time"},[-1==e.timeIndex?i("v-uni-text",[e._v("请选择服务时间")]):i("v-uni-text",[e._v(e._s(e.timeArray[e.timeIndex]))])],1),i("v-uni-view",{staticClass:"order-param-icon"},[i("uni-icons",{attrs:{type:"forward",size:"15",color:"#24C373"}})],1)],1)],1),1==e.master.travel_expense?[i("v-uni-view",{staticClass:"order-param mix-top"},[i("v-uni-view",{staticClass:"order-param-label"},[e._v("出行方式")]),i("v-uni-view",{staticClass:"order-param-value",staticStyle:{"padding-top":"15px"}},[1==e.travel_type?[i("v-uni-view",{staticClass:"travel-item travel-item-selected"},[e._v(e._s(e.travel_fee_text))])]:e._e()],2)],1),i("v-uni-view",{staticClass:"order-param",staticStyle:{height:"50px"}},[i("v-uni-view",{staticClass:"order-param-label",staticStyle:{flex:"1",color:"#999"}},[e._v("全程共"+e._s(e.distance_msg)+"；出行费起步价"+e._s(e.master.qibujia)+"元，每公里"+e._s(e.master.taxi_fee)+"元；")])],1),i("v-uni-view",{staticClass:"order-param"},[i("v-uni-view",{staticClass:"order-param-label"},[e._v("出行费")]),e.address.id?i("v-uni-view",{staticClass:"order-param-value",staticStyle:{color:"rgb(255, 96, 81)"}},[e._v("￥"+e._s(e.payInfo.travel_expense))]):i("v-uni-view",{staticClass:"order-param-value",staticStyle:{color:"rgb(255, 96, 81)"}},[e._v("选择地址后显示")])],1)]:e._e(),i("v-uni-view",{staticClass:"order-param mix-top"},[i("v-uni-view",{staticClass:"order-param-label"},[e._v("备注")]),i("v-uni-view",{staticClass:"order-param-value"},[i("v-uni-input",{attrs:{type:"text",name:"remark",placeholder:"在此输入备注"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.inputRemark.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"order-param-icon"},[i("uni-icons",{attrs:{type:"forward",size:"15"}})],1)],1),i("v-uni-view",{staticClass:"order-param mix-top"},[i("v-uni-view",{staticClass:"order-param-pic"},[i("v-uni-image",{attrs:{src:a("7fe6")}})],1),i("v-uni-view",{staticClass:"order-param-label"},[e._v("优惠券")]),i("v-uni-view",{staticClass:"order-param-value",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openCouponToast.apply(void 0,arguments)}}},[e.coupon_list[0]?e._e():i("v-uni-view",{staticClass:"order-param-coupon"},[e._v("无可用优惠券"),i("uni-icons",{attrs:{type:"forward",size:"12",color:"#999"}})],1),e.coupon_list[0]&&!e.coupon.id?i("v-uni-view",{staticClass:"order-param-coupon order-param-coupon-active"},[e._v(e._s(e.coupon_list.length)+"张可用"),i("uni-icons",{attrs:{type:"forward",size:"12",color:"#fff"}})],1):e._e(),e.coupon_list[0]&&e.coupon.id?i("v-uni-view",{staticClass:"order-param-coupon order-param-coupon-sel"},[e._v(e._s(e.coupon.name)),i("uni-icons",{attrs:{type:"forward",size:"12",color:"#FD4950"}})],1):e._e()],1)],1)],2)],1),i("v-uni-view",{staticClass:"pay-type-container"},[i("v-uni-view",{staticClass:"pay-type-header"},[e._v("支付方式")]),i("v-uni-view",{staticClass:"pay-type-wrap"},[i("v-uni-radio-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.payTypeChange.apply(void 0,arguments)}}},[i("v-uni-label",[i("v-uni-view",{staticClass:"pay-type-item"},[i("v-uni-view",{staticClass:"pay-type-icon"},[i("v-uni-image",{attrs:{src:a("d1ad")}})],1),i("v-uni-view",{staticClass:"pay-type-name"},[e._v("微信支付")]),i("v-uni-view",{staticClass:"pay-type-radio"},[i("v-uni-radio",{attrs:{value:"1",checked:!0}})],1)],1)],1),i("v-uni-label",[i("v-uni-view",{staticClass:"pay-type-item"},[i("v-uni-view",{staticClass:"pay-type-icon"},[i("v-uni-image",{attrs:{src:a("0ee1")}})],1),i("v-uni-view",{staticClass:"pay-type-name"},[e._v("余额支付"),i("v-uni-text",{staticStyle:{color:"#555","font-size":"12px"}},[e._v("（当前余额："+e._s(e.user.balance)+"元）")])],1),i("v-uni-view",{staticClass:"pay-type-radio"},[e.user.balance>=e.payInfo.pay_fee?i("v-uni-radio",{attrs:{value:"2"}}):i("v-uni-radio",{attrs:{disabled:!0,value:"2"}})],1)],1)],1)],1)],1)],1),i("v-uni-view",{staticStyle:{width:"100%",height:"60px"}}),i("v-uni-view",{staticClass:"pay-wrap"},[i("v-uni-view",{staticClass:"pay-info"},[i("v-uni-text",[e._v("合计：")]),e._v("￥"+e._s(e.payInfo.pay_fee))],1),i("v-uni-view",{staticClass:"pay-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pay.apply(void 0,arguments)}}},[e._v("立即支付")])],1),i("uni-popup",{ref:"popup",attrs:{"background-color":"#fff"}},[i("v-uni-view",[i("v-uni-view",{staticStyle:{display:"flex"}},[i("v-uni-view",{staticStyle:{display:"flex",width:"50px"}}),i("v-uni-view",{staticStyle:{display:"flex",flex:"1","justify-content":"center","align-items":"center",height:"40px"}},[e._v("选择优惠券")]),i("v-uni-view",{staticStyle:{display:"flex",width:"40px","justify-content":"center","align-items":"center",height:"40px"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.closeCouponToast.apply(void 0,arguments)}}},[i("uni-icons",{attrs:{type:"close",size:"20"}})],1)],1),i("v-uni-view",[i("yj-coupon",{attrs:{list:e.coupon_list,btnShow:!0},on:{selCoupon:function(t){arguments[0]=t=e.$handleEvent(t),e.selCoupon.apply(void 0,arguments)}}})],1)],1)],1)],1)},o=[]},d1ad:function(e,t,a){e.exports=a.p+"static/images/wechat-pay.png"},d594:function(e,t,a){"use strict";var i=a("2944"),n=a.n(i);n.a},db72:function(e,t,a){e.exports=a.p+"static/images/null.png"},ffdd:function(e,t,a){"use strict";a.r(t);var i=a("a3dc"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a}}]);